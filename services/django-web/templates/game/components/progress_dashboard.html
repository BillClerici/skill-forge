<!-- Progress Dashboard Component -->
<style>
    .dimension-box {
        background: rgba(212, 175, 55, 0.1);
        border-radius: 8px;
        border-left: 3px solid #d4af37;
        padding: 0.875rem;
        margin-bottom: 0.75rem;
    }

    .dimension-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.5rem;
    }

    .dimension-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        flex-shrink: 0;
    }

    .dimension-icon.physical { background: rgba(243, 156, 18, 0.2); }
    .dimension-icon.emotional { background: rgba(233, 30, 99, 0.2); }
    .dimension-icon.intellectual { background: rgba(63, 81, 181, 0.2); }
    .dimension-icon.social { background: rgba(0, 150, 136, 0.2); }
    .dimension-icon.spiritual { background: rgba(156, 39, 176, 0.2); }
    .dimension-icon.vocational { background: rgba(255, 152, 0, 0.2); }
    .dimension-icon.environmental { background: rgba(76, 175, 80, 0.2); }

    .dimension-name {
        font-weight: 600;
        color: #d4af37;
        font-size: 0.9rem;
    }

    .dimension-level {
        font-size: 0.7rem;
        color: #718096;
    }

    .dimension-progress-bar {
        height: 6px;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 0.4rem;
    }

    .dimension-progress-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.5s ease;
    }

    .dimension-progress-fill.physical { background: #f39c12; }
    .dimension-progress-fill.emotional { background: #e91e63; }
    .dimension-progress-fill.intellectual { background: #3f51b5; }
    .dimension-progress-fill.social { background: #009688; }
    .dimension-progress-fill.spiritual { background: #9c27b0; }
    .dimension-progress-fill.vocational { background: #ff9800; }
    .dimension-progress-fill.environmental { background: #4caf50; }

    .dimension-stats {
        display: flex;
        justify-content: space-between;
        font-size: 0.7rem;
        color: #718096;
    }
</style>

<!-- Character Progression -->
<h3>üåü Character Progression</h3>
<div style="margin-bottom: 1.5rem;">
    {% for dimension, data in character.dimensional_profile.items %}
    <div class="dimension-box" data-dimension="{{ dimension }}" style="border-left-color: {{ data.color }};">
        <div class="dimension-header">
            <div class="dimension-icon {{ dimension }}">
                {% if dimension == 'physical' %}üí™
                {% elif dimension == 'emotional' %}‚ù§Ô∏è
                {% elif dimension == 'intellectual' %}üß†
                {% elif dimension == 'social' %}üë•
                {% elif dimension == 'spiritual' %}‚ú®
                {% elif dimension == 'vocational' %}üõ†Ô∏è
                {% elif dimension == 'environmental' %}üåç
                {% endif %}
            </div>
            <div style="flex: 1;">
                <div class="dimension-name" style="color: {{ data.color }};">{{ dimension|title }}</div>
                <div class="dimension-level">{{ data.friendly_name }} ‚Ä¢ {{ data.bloom_level }}</div>
            </div>
        </div>
        <!-- Segmented Progress Bar -->
        <div style="display: flex; align-items: center; gap: 3px; margin-top: 8px; padding-bottom: 16px;">
            {% with bloom_level=data.bloom_level %}
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'remembering' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'remembering' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'remembering' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Novice</div>
            </div>
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'understanding' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'understanding' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'understanding' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Apprentice</div>
            </div>
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'applying' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'applying' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'applying' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Journeyman</div>
            </div>
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'analyzing' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'analyzing' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'analyzing' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Expert</div>
            </div>
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'evaluating' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'evaluating' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'evaluating' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Master</div>
            </div>
            <div style="position: relative; flex: 1;">
                <div style="height: 6px; background-color: {% if bloom_level == 'creating' %}{{ data.color }}{% else %}rgba(255, 255, 255, 0.1){% endif %}; border-radius: 3px;"></div>
                {% if bloom_level == 'creating' %}
                <div style="position: absolute; top: -2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background-color: {{ data.color }}; border: 2px solid #d4af37; border-radius: 50%;"></div>
                {% endif %}
                <div style="position: absolute; top: 12px; left: 50%; transform: translateX(-50%); white-space: nowrap; font-size: 0.6rem; {% if bloom_level == 'creating' %}color: {{ data.color }}; font-weight: 600;{% else %}color: #718096; opacity: 0.6;{% endif %}">Grandmaster</div>
            </div>
            {% endwith %}
        </div>
    </div>
    {% endfor %}
</div>

<script>
    // Update progress based on game state
    function updateDimensionalProgress(dimensionUpdates) {
        if (!dimensionUpdates) return;

        // Update each dimension's progress bar and stats
        Object.keys(dimensionUpdates).forEach(dimension => {
            const data = dimensionUpdates[dimension];
            const dimensionBox = document.querySelector(`[data-dimension="${dimension}"]`);

            if (dimensionBox && data) {
                // Update progress bar
                const progressBar = dimensionBox.querySelector('.dimension-progress-fill');
                if (progressBar && data.progress_percentage !== undefined) {
                    progressBar.style.width = `${data.progress_percentage}%`;
                }

                // Update level text
                const levelText = dimensionBox.querySelector('.dimension-level');
                if (levelText && data.friendly_name && data.bloom_level) {
                    levelText.textContent = `${data.friendly_name} ‚Ä¢ ${data.bloom_level}`;
                }
            }
        });
    }

    // Listen for progress updates from WebSocket
    if (typeof window !== 'undefined') {
        window.addEventListener('gameProgressUpdate', (event) => {
            const { dimensions } = event.detail;
            updateDimensionalProgress(dimensions);
        });
    }
</script>
