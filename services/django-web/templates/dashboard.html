{% extends 'base.html' %}

{% block title %}Dashboard - SkillForge RPG{% endblock %}

{% block content %}
<div class="row">
    <div class="col s12">
        <h4 class="white-text" style="color: var(--rpg-gold) !important; text-shadow: 0 0 15px rgba(212, 175, 55, 0.4);">
            <i class="material-icons left">dashboard</i>Dashboard
        </h4>
    </div>
</div>

<!-- Stats Cards -->
<div class="row">
    <div class="col s12 m6 l3">
        <div class="card stat-card hoverable">
            <div class="card-content white-text center-align">
                <i class="material-icons">group</i>
                <h3 class="white-text" style="margin: 10px 0;">{{ total_accounts }}</h3>
                <p style="font-size: 1.1rem; font-weight: 500;">Total Accounts</p>
            </div>
            <div class="card-action center-align">
                <a href="{% url 'account_list' %}" class="white-text" style="font-weight: 600;">View All</a>
            </div>
        </div>
    </div>

    <div class="col s12 m6 l3">
        <div class="card stat-card hoverable">
            <div class="card-content white-text center-align">
                <i class="material-icons">person</i>
                <h3 class="white-text" style="margin: 10px 0;">{{ total_players }}</h3>
                <p style="font-size: 1.1rem; font-weight: 500;">Total Players</p>
            </div>
            <div class="card-action center-align">
                <a href="{% url 'player_list' %}" class="white-text" style="font-weight: 600;">View All</a>
            </div>
        </div>
    </div>

    <div class="col s12 m6 l3">
        <div class="card stat-card hoverable">
            <div class="card-content white-text center-align">
                <i class="material-icons">public</i>
                <h3 class="white-text" style="margin: 10px 0;">{{ total_universes }}</h3>
                <p style="font-size: 1.1rem; font-weight: 500;">Universes</p>
            </div>
            <div class="card-action center-align">
                <a href="{% url 'universe_list' %}" class="white-text" style="font-weight: 600;">View All</a>
            </div>
        </div>
    </div>

    <div class="col s12 m6 l3">
        <div class="card stat-card hoverable">
            <div class="card-content white-text center-align">
                <i class="material-icons">language</i>
                <h3 class="white-text" style="margin: 10px 0;">{{ total_worlds }}</h3>
                <p style="font-size: 1.1rem; font-weight: 500;">Worlds</p>
            </div>
            <div class="card-action center-align">
                <a href="{% url 'world_list' %}" class="white-text" style="font-weight: 600;">View All</a>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="row">
    <!-- Recent Accounts -->
    <div class="col s12 l6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">group</i>Recent Accounts
                </span>
                {% if recent_accounts %}
                <ul class="collection" style="border: none; margin-top: 15px;">
                    {% for account in recent_accounts %}
                    <li class="collection-item" style="background-color: transparent;">
                        <div>
                            <a href="{% url 'account_detail' account.account_id %}" class="white-text" style="font-weight: 500; font-size: 1.05rem;">
                                {{ account.name }}
                            </a>
                            <span class="badge" style="background-color: var(--rpg-purple);">{{ account.account_type }}</span>
                            <p class="grey-text" style="margin: 5px 0 0 0; font-size: 0.9rem;">
                                Created {{ account.created_at|timesince }} ago
                            </p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="grey-text center-align" style="padding: 20px;">No accounts yet</p>
                {% endif %}
            </div>
            <div class="card-action">
                <a href="{% url 'account_list' %}" style="color: var(--rpg-gold); font-weight: 600;">View All Accounts</a>
            </div>
        </div>
    </div>

    <!-- Recent Players -->
    <div class="col s12 l6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">person</i>Recent Players
                </span>
                {% if recent_players %}
                <ul class="collection" style="border: none; margin-top: 15px;">
                    {% for player in recent_players %}
                    <li class="collection-item" style="background-color: transparent;">
                        <div>
                            <a href="{% url 'player_detail' player.player_id %}" class="white-text" style="font-weight: 500; font-size: 1.05rem;">
                                {{ player.display_name }}
                            </a>
                            <span class="badge" style="background-color: var(--rpg-blue);">{{ player.role }}</span>
                            <p class="grey-text" style="margin: 5px 0 0 0; font-size: 0.9rem;">
                                Joined {{ player.created_at|timesince }} ago
                            </p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="grey-text center-align" style="padding: 20px;">No players yet</p>
                {% endif %}
            </div>
            <div class="card-action">
                <a href="{% url 'player_list' %}" style="color: var(--rpg-gold); font-weight: 600;">View All Players</a>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row">
    <div class="col s12">
        <div class="card">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">flash_on</i>Quick Actions
                </span>
                <div style="margin-top: 20px;">
                    <a href="{% url 'account_list' %}" class="btn waves-effect waves-light" style="margin-right: 10px; margin-bottom: 10px;">
                        <i class="material-icons left">add</i>Create Account
                    </a>
                    <a href="{% url 'player_list' %}" class="btn waves-effect waves-light" style="margin-right: 10px; margin-bottom: 10px;">
                        <i class="material-icons left">person_add</i>Add Player
                    </a>
                    <a href="/graphql/" class="btn waves-effect waves-light" style="margin-right: 10px; margin-bottom: 10px;">
                        <i class="material-icons left">code</i>GraphQL Playground
                    </a>
                    <a href="{% url 'admin:index' %}" class="btn waves-effect waves-light" style="margin-bottom: 10px;">
                        <i class="material-icons left">settings</i>Admin Panel
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
